{"ast":null,"code":"var _jsxFileName = \"/home/dan/Documents/projectv2/client/src/components/TeamMessage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { MessageTeam, useMessageContext } from 'stream-chat-react'; // Url to teamates image scraping service\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst urlStr = 'https://scrape.quin.fish/'; //message component\n\nconst TeamMessage = (Message, i) => {\n  _s();\n\n  //retrieve the message we are building a component for\n  const {\n    handleOpenThread,\n    message\n  } = useMessageContext();\n  const [imageUrl, setImageUrl] = useState('1111'); //set image state to new url\n\n  const setImg = newUrl => {\n    setImageUrl(newUrl);\n  }; //rudimentary url detection\n\n\n  var lastFive = message.text.substr(message.text.length - 4);\n  var firstFive = message.text.substr(0, 4);\n  var isUrl = false;\n\n  if ((lastFive == \".com\" || lastFive == \"com/\" || lastFive == \"edu/\") && firstFive == \"http\") {\n    isUrl = true;\n  }\n\n  var imgUrl = \"\";\n  console.log(message.user.name);\n\n  if (isUrl) {\n    console.log(\"hello\");\n    var req = new XMLHttpRequest();\n    var payload = {\n      url: null\n    };\n    payload.url = message.text;\n    req.open('POST', urlStr, true);\n    req.setRequestHeader('Content-Type', 'application/json');\n    req.addEventListener('load', function () {\n      if (req.status >= 200 && req.status < 400) {\n        var response = JSON.parse(req.responseText); //Creates array of rows, super helpful for front end\n\n        console.log(response.data.images[0]); // log to console what we got back\n\n        imgUrl = response.data.images[0];\n        setImg(imgUrl);\n      } else {\n        console.log(\"Error (did you put blank input?)\" + req.statusText);\n      }\n    });\n    req.send(JSON.stringify(payload));\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"message_container\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"userName_message\",\n      children: [message.user.name, \":\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), message.text, isUrl ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        href: message.text,\n        children: [\"  \", /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imageUrl,\n          width: \"150\",\n          height: \"100\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 52\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 27\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 22\n    }, this) : '']\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n\n_s(TeamMessage, \"/53AvTKjx80h/XlAcu3l98WTLPQ=\", false, function () {\n  return [useMessageContext];\n});\n\n_c = TeamMessage;\nexport default TeamMessage;\n\nvar _c;\n\n$RefreshReg$(_c, \"TeamMessage\");","map":{"version":3,"sources":["/home/dan/Documents/projectv2/client/src/components/TeamMessage.jsx"],"names":["React","useState","MessageTeam","useMessageContext","urlStr","TeamMessage","Message","i","handleOpenThread","message","imageUrl","setImageUrl","setImg","newUrl","lastFive","text","substr","length","firstFive","isUrl","imgUrl","console","log","user","name","req","XMLHttpRequest","payload","url","open","setRequestHeader","addEventListener","status","response","JSON","parse","responseText","data","images","statusText","send","stringify"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { MessageTeam, useMessageContext } from 'stream-chat-react';\n// Url to teamates image scraping service\nconst urlStr = 'https://scrape.quin.fish/';\n\n//message component\nconst TeamMessage = (Message, i) => {\n    //retrieve the message we are building a component for\n    const { handleOpenThread, message } = useMessageContext();\n    const [imageUrl, setImageUrl] = useState('1111');\n   //set image state to new url\n    const setImg = (newUrl) => {\n        setImageUrl(newUrl);\n      } \n\n    //rudimentary url detection\n    var lastFive = message.text.substr(message.text.length - 4);\n    var firstFive = message.text.substr(0, 4);\n    var isUrl = false\n    if((lastFive==\".com\" ||lastFive==\"com/\" || lastFive==\"edu/\") && firstFive == \"http\"){\n        isUrl = true\n    }\n\n    var imgUrl = \"\"\n    console.log(message.user.name)\n\n    \n    if (isUrl){\n        console.log(\"hello\")\n\t\tvar req = new XMLHttpRequest();\n        var payload = {url:null};\n        payload.url = message.text\n        req.open('POST', urlStr, true);\n\t\treq.setRequestHeader('Content-Type', 'application/json');\n\t\treq.addEventListener('load', function(){\n\t\t\tif(req.status>= 200 && req.status < 400){\n\t\t\t\tvar response = JSON.parse(req.responseText);\t//Creates array of rows, super helpful for front end\n\t\t\t\tconsole.log(response.data.images[0]);// log to console what we got back\n                imgUrl=response.data.images[0]\n                setImg(imgUrl)\n\n\t\t\t}\n\t\t\telse{\n\t\t\t\tconsole.log(\"Error (did you put blank input?)\"+req.statusText);\n\t\t\t}\n\t\t});\n        req.send(JSON.stringify(payload));   \n    }\n    \n    return (\n        <div className=\"message_container\">\n            <p className=\"userName_message\">\n            {message.user.name}:\n            </p>\n            {message.text} \n \n            {isUrl ? <div><a href={message.text}>  <img src={imageUrl} width=\"150\" height=\"100\" ></img></a> </div>: ''}\n\n        </div>\n    )\n}\n\nexport default TeamMessage\n"]},"metadata":{},"sourceType":"module"}